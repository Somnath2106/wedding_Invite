<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rinki ❤️ Somnath - 04.03.2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sacramento&family=Work+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8ba888; /* Sage green from video */
            --accent: #d4af37;
            --text-dark: #4a4a4a;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Work Sans', sans-serif;
            background-color: #f9f9f9;
            color: var(--text-dark);
            overflow-x: hidden;
        }

        .font-sacramento { font-family: 'Sacramento', cursive; }
        
        /* Fixed Envelope Animation */
        #envelope-overlay {
            position: fixed;
            inset: 0;
            background: #cbd5e1;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1), visibility 1.2s;
        }

        .envelope-wrapper {
            position: relative;
            cursor: pointer;
            perspective: 1500px;
            width: 340px;
            height: 240px;
        }

        .envelope {
            position: relative;
            width: 100%;
            height: 100%;
            background: var(--primary);
            box-shadow: 0 30px 60px rgba(0,0,0,0.15);
            transition: transform 0.8s;
        }

        .envelope .top-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            z-index: 4;
            border-left: 170px solid transparent;
            border-right: 170px solid transparent;
            border-top: 130px solid var(--primary);
            transform-origin: top;
            transition: transform 0.8s ease-in-out;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));
        }

        .envelope .front-flaps {
            position: absolute;
            inset: 0;
            z-index: 3;
        }

        /* Side and bottom flaps to create envelope look */
        .envelope .front-flaps::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(30deg, #9db99a 50%, transparent 50%), 
                        linear-gradient(-30deg, #9db99a 50%, transparent 50%);
            z-index: 3;
        }

        .envelope .letter {
            position: absolute;
            bottom: 10px;
            left: 15px;
            width: 310px;
            height: 200px;
            background: white;
            z-index: 2;
            padding: 30px 20px;
            text-align: center;
            transition: transform 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 0 15px rgba(0,0,0,0.05);
        }

        .wax-seal {
            position: absolute;
            top: 110px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            background: #fdf2f2;
            border-radius: 50%;
            z-index: 5;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            color: var(--accent);
            font-size: 1.4rem;
            border: 2px solid #fff;
            transition: all 0.5s ease;
        }

        /* Animation Trigger */
        .envelope-wrapper.open .top-flap {
            transform: rotateX(180deg);
            z-index: 1;
        }

        .envelope-wrapper.open .letter {
            transform: translateY(-130px) scale(1.05);
        }

        .envelope-wrapper.open .wax-seal {
            opacity: 0;
            transform: translateX(-50%) scale(0.5);
        }

        .hidden-overlay {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        /* Nav Transitions */
        nav.scrolled {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            padding: 0.75rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        nav.scrolled .brand-text, nav.scrolled .nav-link, nav.scrolled #menu-toggle {
            color: #1f2937;
        }

        /* Sections */
        .hero-section {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.3)), url('https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .countdown-item {
            min-width: 80px;
            padding: 10px;
            background: var(--primary);
            color: white;
            border-radius: 12px;
        }

        #mobile-menu {
            transition: transform 0.4s ease-in-out;
            transform: translateY(-100%);
        }
        #mobile-menu.active { transform: translateY(0); }

        /* Loader */
        .loader {
            border: 3px solid #f3f3f3;
            border-radius: 50%;
            border-top: 3px solid var(--primary);
            width: 20px;
            height: 20px;
            -webkit-animation: spin 1s linear infinite; /* Safari */
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Lightbox */
        #lightbox {
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease-in-out;
        }
        #lightbox.active {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body>

    <!-- Background Music -->
    <audio id="bgMusic" loop>
        <source src="Perfect-632403-mobiles24.mp3" type="audio/mpeg">
    </audio>

    <!-- Refined Envelope Overlay -->
    <div id="envelope-overlay">
        <div class="text-center px-4">
            <p class="mb-10 text-gray-500 tracking-[0.3em] uppercase text-xs animate-pulse">This invitation is exclusive for you</p>
            <div class="envelope-wrapper" id="invitationStarter">
                <div class="envelope">
                    <div class="top-flap"></div>
                    <div class="letter">
                        <h3 class="font-sacramento text-3xl text-gray-800">Rinki & Somnath</h3>
                        <p class="text-[10px] text-gray-400 uppercase tracking-widest mt-3">Wedding Invitation</p>
                        <p class="text-sm font-bold mt-4 text-green-700">04.03.2026</p>
                    </div>
                    <div class="front-flaps"></div>
                    <div class="wax-seal font-sacramento">R&S</div>
                </div>
            </div>
            <p class="mt-28 text-[10px] text-gray-400 uppercase tracking-[0.2em]">Click the seal to open</p>
        </div>
    </div>

    <!-- Navigation -->
    <nav id="navbar" class="fixed top-0 w-full z-50 transition-all duration-500 py-6">
        <div class="max-w-6xl mx-auto px-6 flex justify-between items-center">
            <div class="brand-text font-sacramento text-4xl font-bold text-white transition-colors duration-500">Rinki & Somnath</div>
            
            <div class="hidden md:flex space-x-10 text-xs font-semibold uppercase tracking-[0.2em] text-white transition-colors duration-500">
                <a href="#home" class="hover:opacity-70 transition">Home</a>
                <a href="#events" class="hover:opacity-70 transition">Events</a>
                <a href="#gallery" class="hover:opacity-70 transition">Gallery</a>
                <a href="#wishes" class="hover:opacity-70 transition text-yellow-300">Wishes ✨</a>
            </div>

            <button id="menu-toggle" class="md:hidden text-white transition-colors duration-500">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="fixed top-0 left-0 w-full bg-white z-[49] md:hidden shadow-lg pt-24 pb-12">
        <div class="flex flex-col items-center space-y-8 text-sm font-semibold uppercase tracking-widest text-gray-600">
            <a href="#home" class="mobile-link">Home</a>
            <a href="#events" class="mobile-link">Events</a>
            <a href="#gallery" class="mobile-link">Gallery</a>
            <a href="#wishes" class="mobile-link text-green-700">Wishes ✨</a>
        </div>
    </div>

    <!-- Hero Section -->
    <header id="home" class="hero-section text-center text-white px-4">
        <div>
            <h1 class="font-sacramento text-7xl md:text-9xl mb-4 drop-shadow-xl">Rinki & Somnath</h1>
            
            <!-- Aligned and Styled Image -->
            <img src="fprint.png" alt="Fingerprint Heart" class="mx-auto block w-32 md:w-48 opacity-90 mb-6 drop-shadow-lg" onerror="this.style.display='none'">
            
            <p class="text-xl md:text-2xl font-light tracking-[0.4em] uppercase mb-8 drop-shadow-lg">March 04, 2026</p>
            <div class="max-w-2xl mx-auto italic text-lg opacity-90 mb-12">
                "I have found the one whom my soul loves."<br>
                <span class="text-xs uppercase tracking-widest">— Song of Solomon 3:4</span>
            </div>
            
            <div id="countdown" class="flex justify-center gap-4">
                <div class="countdown-item shadow-xl">
                    <div id="days" class="text-2xl font-bold">00</div>
                    <div class="text-[10px] uppercase">Days</div>
                </div>
                <div class="countdown-item shadow-xl">
                    <div id="hours" class="text-2xl font-bold">00</div>
                    <div class="text-[10px] uppercase">Hrs</div>
                </div>
                <div class="countdown-item shadow-xl">
                    <div id="minutes" class="text-2xl font-bold">00</div>
                    <div class="text-[10px] uppercase">Min</div>
                </div>
                <div class="countdown-item shadow-xl">
                    <div id="seconds" class="text-2xl font-bold">00</div>
                    <div class="text-[10px] uppercase">Sec</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Events Section -->
    <section id="events" class="py-24 bg-gray-50 px-6">
        <div class="max-w-6xl mx-auto">
            <h2 class="font-sacramento text-6xl text-center mb-20 text-gray-800">Wedding Ceremony</h2>
            
            <div class="max-w-3xl mx-auto">
                <div class="bg-white p-10 md:p-16 text-center rounded-[40px] shadow-sm border border-gray-100">
                    <div class="w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-10 border border-green-100">
                        <svg class="w-10 h-10 text-green-700" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
                    </div>
                    <h3 class="text-4xl font-bold mb-4">The Big Day</h3>
                    <div class="text-green-700 font-semibold text-xl mb-8">
                        Wednesday, 4th March 2026
                    </div>
                    <p class="text-gray-600 mb-10 text-lg leading-relaxed">
                        Location: <br>
                        <b class="text-gray-900">Nayapatty, Sector V, Bidhannagar,</b><br>
                        Kolkata - 700 102
                    </p>
                    
                    <div class="rounded-3xl overflow-hidden h-72 bg-gray-100 border border-gray-100 shadow-inner">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3684.144855734204!2d88.4316!3d22.5735!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a0275ade6681485%3A0x7597376405101fa8!2sNayapatti%2C%20Sector%20V%2C%20Bidhannagar%2C%20Kolkata%2C%20West%20Bengal!5e0!3m2!1sen!2sin!4v1710000000000!5m2!1sen!2sin" 
                            width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery Section (Enhanced) -->
    <section id="gallery" class="py-24 bg-white px-6">
        <div class="max-w-6xl mx-auto">
            <h2 class="font-sacramento text-6xl text-center mb-20 text-gray-800">Gallery</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                
                <!-- Gallery Item 1 -->
                <div class="group relative aspect-[4/5] rounded-[40px] overflow-hidden cursor-pointer shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-2" onclick="openLightbox('DSC_6901.JPG')">
                    <img src="DSC_6901.JPG" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="Wedding Couple">
                    <!-- Overlay -->
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300 flex flex-col justify-end p-8">
                        <p class="text-white font-sacramento text-3xl transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500">Together Forever</p>
                        <p class="text-white/80 text-xs tracking-widest uppercase mt-2 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 delay-75">Click to view</p>
                    </div>
                </div>

                <!-- Gallery Item 2 -->
                <div class="group relative aspect-[4/5] rounded-[40px] overflow-hidden cursor-pointer shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-2" onclick="openLightbox('DSC_6978.JPG')">
                    <img src="DSC_6978.JPG" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="Details">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300 flex flex-col justify-end p-8">
                        <p class="text-white font-sacramento text-3xl transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500">Little Details</p>
                        <p class="text-white/80 text-xs tracking-widest uppercase mt-2 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 delay-75">Click to view</p>
                    </div>
                </div>

                <!-- Gallery Item 3 -->
                <div class="group relative aspect-[4/5] rounded-[40px] overflow-hidden cursor-pointer shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-2" onclick="openLightbox('DSC_7015.JPG')">
                    <img src="DSC_7015.JPG" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="Ceremony">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300 flex flex-col justify-end p-8">
                        <p class="text-white font-sacramento text-3xl transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500">The Vows</p>
                        <p class="text-white/80 text-xs tracking-widest uppercase mt-2 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 delay-75">Click to view</p>
                    </div>
                </div>

            </div>
        </div>
    </section>

    

    <footer class="py-20 bg-gray-900 text-white text-center px-6">
        <div class="font-sacramento text-5xl mb-6">Rinki & Somnath</div>
        <div class="w-20 h-0.5 bg-green-700 mx-auto mb-8"></div>
        <p class="text-gray-400 text-xs tracking-[0.4em] uppercase max-w-lg mx-auto leading-relaxed">
            March 04, 2026 • Kolkata
        </p>
    </footer>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="fixed inset-0 z-[60] bg-black/90 backdrop-blur-md flex items-center justify-center p-4" onclick="closeLightbox()">
        <button class="absolute top-6 right-6 text-white/70 hover:text-white transition transform hover:scale-110">
            <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
        <img id="lightbox-img" src="" class="max-w-full max-h-[90vh] rounded-xl shadow-2xl object-contain transform transition-transform duration-300 scale-95" onclick="event.stopPropagation()">
    </div>

    <script>
        // Navbar Scroll
        const navbar = document.getElementById('navbar');
        window.onscroll = () => {
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        };

        // Mobile Menu
        const menuToggle = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        menuToggle.addEventListener('click', () => {
            mobileMenu.classList.toggle('active');
        });

        document.querySelectorAll('.mobile-link').forEach(link => {
            link.addEventListener('click', () => mobileMenu.classList.remove('active'));
        });

        // Envelope Logic
        const invitationStarter = document.getElementById('invitationStarter');
        const overlay = document.getElementById('envelope-overlay');
        const bgMusic = document.getElementById('bgMusic');

        invitationStarter.addEventListener('click', () => {
            invitationStarter.classList.add('open');
            bgMusic.play().catch(e => console.log("Audio requires interaction", e));

            // Wait for letter animation to complete before revealing site
            setTimeout(() => {
                overlay.classList.add('hidden-overlay');
            }, 2200);
        });

        // Countdown (March 4, 2026)
        const weddingDate = new Date("Mar 4, 2026 12:00:00").getTime();

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = weddingDate - now;

            if (distance < 0) {
                document.getElementById('countdown').innerHTML = "<p class='text-2xl font-bold uppercase tracking-widest'>Just Married!</p>";
                return;
            }

            const d = Math.floor(distance / (1000 * 60 * 60 * 24));
            const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById('days').innerText = d.toString().padStart(2, '0');
            document.getElementById('hours').innerText = h.toString().padStart(2, '0');
            document.getElementById('minutes').innerText = m.toString().padStart(2, '0');
            document.getElementById('seconds').innerText = s.toString().padStart(2, '0');
        }

        setInterval(updateCountdown, 1000);
        updateCountdown();

        // Lightbox Logic
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');

        function openLightbox(src) {
            lightboxImg.src = src;
            lightbox.classList.add('active');
            // Small timeout to allow display:block to apply before animating opacity if needed, 
            // but CSS transition handles it well. Added simple scale effect.
            setTimeout(() => {
                lightboxImg.classList.remove('scale-95');
                lightboxImg.classList.add('scale-100');
            }, 50);
        }

        function closeLightbox() {
            lightboxImg.classList.remove('scale-100');
            lightboxImg.classList.add('scale-95');
            lightbox.classList.remove('active');
        }

        // --- GEMINI API INTEGRATION ---
        
        const apiKey = ""; // Set by environment
        let currentWishText = "";

        async function callGemini(prompt) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            
            const payload = {
                contents: [{ parts: [{ text: prompt }] }]
            };

            // Exponential backoff strategy
            const delays = [1000, 2000, 4000];
            
            for (let i = 0; i <= delays.length; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    
                    const data = await response.json();
                    return data.candidates[0].content.parts[0].text;
                } catch (error) {
                    if (i === delays.length) throw error;
                    await new Promise(resolve => setTimeout(resolve, delays[i]));
                }
            }
        }

        async function generateWish() {
            const relation = document.getElementById('relation').value;
            const tone = document.getElementById('tone').value;
            const output = document.getElementById('wishOutput');
            const loader = document.getElementById('loading');
            
            // Show loader
            loader.classList.remove('hidden');
            
            const prompt = `Write a short, engaging wedding wish (max 40 words) for Rinki and Somnath's wedding on March 4th 2026. The wish is from a "${relation}" and the tone should be "${tone}". Mention the couple's names. Do not include quotes around the text.`;

            try {
                const text = await callGemini(prompt);
                currentWishText = text;
                output.innerText = text;
            } catch (error) {
                console.error(error);
                output.innerText = "The muse is taking a break. Please try again! ✨";
            } finally {
                loader.classList.add('hidden');
            }
        }

        async function translateToBengali() {
            if (!currentWishText) return;
            
            const output = document.getElementById('wishOutput');
            const loader = document.getElementById('loading');
            
            loader.classList.remove('hidden');
            
            const prompt = `Translate the following wedding wish to Bengali (Bangla script). Keep the tone warm and culturally appropriate for a Kolkata wedding. Text: "${currentWishText}"`;

            try {
                const text = await callGemini(prompt);
                output.innerText = text;
            } catch (error) {
                console.error(error);
            } finally {
                loader.classList.add('hidden');
            }
        }

        function copyWish() {
            const text = document.getElementById('wishOutput').innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert('Wish copied to clipboard! ✨');
            });
        }
    </script>
</body>
</html>